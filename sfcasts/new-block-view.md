# New Block View

Let's create a layout for our individual recipes so we can customize this page a bit more. We can actually create new layouts on the fly, which is pretty cool! I'll hit "New layout", select my 
*favorite* layout - "Layout 2" - and let's call it "Individual Recipe Layout". At this point, we know what to do. We'll start by linking our Header and Footer zones... and then, because we're going to apply this to a *normal* page that we've already built, we can go down here and use this "Full view", which renders the Twig block called "Body".

That's a *great* start! At the top, hit "Publish layout", and then we can get back to mapping. Select "Add new mapping", link it to our "Individual Recipe Layout", and the hit "Details", where we'll link this via the "Path info". *Actually*, let's select "Route" for this one, and then hit "Add target". And then the name of this route, if you go to `src/Controller/RecipeController.php` is `app_recipes_show`. I'll add that here... and hit "Save changes". Let's go try it! We shouldn't see any difference yet and... we *don't*, but we *can* see that we're using our layout. Cool!

Okay, let's spice this page up a little bit! Go back over to Layouts, and let's edit our "Individual Recipe Layout". After "Full View", let's add a Grid and we'll make this a "Dynamic collection" of "Contentful search". Here, we'll just list some skills. Make it "Descending", limit it to three items, and finally "Publish and continue editing". *Awesome*. It's cool that we can just *do* that and put it anywhere. I'll quickly go wrap this in a container, and... there we go! It works!

*But* I want to customize how *this* Grid looks. I want to have one *big* recipe on the left and two *smaller* recipes on the right. But I *don't* want to change how the Grid looks on other parts of our site, like on the homepage. So the question is: How can we change how *this* Grid renders on *just* this page? Right now, if you look at our Grid and go to "Design", a Grid block is really just a List block that has two view types: List and Grid. Let's create a *third* view type! Head over to your terminal and run:

```terminal
./bin/console debug:config netgen_layouts view.block_view
```

This will be the configuration for how blocks are rendered. And we *definitely* want to make sure we spell "netgen" correctly. Perfect!

Now let's find the default. If you scroll down a little bit... here we go. Here are the two view types for the List and the Grid. As I mentioned before, both of these are actually part of the *same* block called "list". They're just two different view types - one called "list" and one called "grid". To see where all of that is defined, let's run that same command, but instead of `view.block_views`, run `block_definitions`. This `block_views` is where you define what blocks *look* like, and `block_definitions` is where you define what the blocks themselves *are*. Every route key on this config is a different block that we can use inside the admin area. If I find the one called `list`... there it is... you can see the two view types: `List` and `Grid`.

So here's the plan: We're going to add a new view type here called "Featured Grid". Then, we'll map that to a template via the block views. Step one is to add the new View type, so over in `/config/packages/netgen_layouts.yaml`, it doesn't matter where, but I'll put this above `view`, add `block_definitions`. Under this config is where you would normally create new blocks, but you can *also* modify *existing* blocks. So I'm basically going to repeat the config here with `list` and then `view_types`. Below that, we can create the one we want. I'll call mine `one_by_two`. And finally, I'll say `name: 1x2 Featured Grid`. With *just* those changes, if we go over and refresh our admin area... and then click down on Grid... we have a new View type! If we switch to *it*... you can see nothing renders here. If we hit "Publish and continue editing", on the frontend... nope. Still nothing. If you look in the web debug toolbar for Layouts and go to Rendered Blocks, near the bottom... you can see it's rendering `invalid_block.html.twig` where the "Block definition" is "list" and the "View type" is "1x2 Featured Grid". The *problem* is that we haven't defined a block view for this combination yet, so it just falls back to `invalid_block`. Let's fix that.

Over here... under `view`, we've already created several item views. Now, down here, we're going to create a `block_view` section. And below *that*, I'm going to register both an *admin* block view and a *frontend* block view, because, as you can see right here, it just renders *nothing*. I'm not *too* worried about the admin view. I'm actually just going to reuse the normal grid view, since it's close enough.

So I'll use the `app` key (we know that `app` means "admin"), followed by `list/one_by_two`, which doesn't really matter. What *does* matter is the next key - `template`. If you looked this up, you'd find that the *name* of the template in our config is this path right here. Oh, and I only need *one* `@`. There we go. *Then*, below that, we'll say `match`, followed by `block\definition: list` and `block\view_type: one_by_two`, making sure that this matches what we have up here under `block_definitions`. And if you didn't know what config to use for the `match` here, you can use your `debug:config` command for `block_view`, find a similar block, and see what kind of `match` stuff it's using.

Okay, so that *should* fix the admin area, and... *much* better! Then, for the frontend, let's *duplicate* that entire section. We'll use `default` for the frontend key. *This* key doesn't matter so we'll skip it. After that, let's replace this `@NetgenLayoutsStandard` with `@nglayouts/block/list/one_by_two_list.html.twig` (we can make that path whatever we want). And this stuff down here is still perfect. So, down in our `/templates` directory - in `/templates/nglayouts/themes/standard/block` - I'll create a sub-directory called `list`, and inside of *that*, a new template: `one_by_two_list.html.twig`. Now that we have our template, we'll start by saying `1x2`. *Sweet*. Over on the frontend, let's see if that works. I'll go back, refresh, and... it does! Here's our *tiny* little "1x2". Nice!

*So* how can we bring that to life? The *first* thing I would do is look at the core Grid template - `grid.html.twig`. We want the one from `/themes/standard`. This can give you an idea of what this normally looks like, and there's *a lot* of special stuff in here that you may or may not want to keep. The most *important* thing here is this `collection_html` where you loop over `collections[collection_identifier]`. This `collection_identifier` is just the word `default`, so it loops over `collections.default`, and then it includes a template - `template_name` - and that's going to be set to `grid/` with `~ number of columns ~ '_columns.html.twig'`. So if we have, for example, *three* columns, we can look up `3_columns.html.twig`, and this is just going to add the `<div>` and use this `nglayouts_render_result`. It's basically looping over something and calling this `nglayouts_render_result` on each one.

I'm going to use that here. I'll paste in some code... and we're basically doing the same thing as before. We're extending `@nglayouts/block/block.html.twig` just like the core one does, and then we're looping over `collections.default`, adding whatever `<div>` we need here, and then using the `nglayouts_render_result` to render the item template. So this is a *simpler* way of just re-working a normal Grid. If we refresh... awesome! We're back to our normal Grid!

To customize this again, I'll paste over it again, and instead of looping, I'm just going to render the `0` result in the first spot, the `1` result here, and the `2` result here. This is just a little more custom, and... that gives me the result I want! Awesome!

We haven't included *all* of the custom stuff that's inside of here, such as the number of columns. That's not at all relevant to this block. You can see that it's being used in the parent template, but we're *not* using it here. If we *wanted* to, if I go back and run `block_definitions` and search for `one_by_two`, we could configure this `valid_parameters` thing here and, like you can see on `list`, set that with an `!` to actually *remove* certain configuration, like the `number_of_columns`. I won't do that now, but you can at least see how it's done, should you ever need to.

Let's head back to our site, go to the "All Skills" page, and... things *still* don't look quite right. On this layout, we're using a Grid to render the items, but for the "All Skills" page, and just this *one* situation, I *really* want each item to render in a different way. Let's learn how to do that next.
